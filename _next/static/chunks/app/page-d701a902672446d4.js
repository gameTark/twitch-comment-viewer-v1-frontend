(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8137:function(e,l,s){Promise.resolve().then(s.bind(s,4681))},2037:function(e,l,s){"use strict";s.d(l,{k:function(){return a}});var t=s(7437);let a=e=>(0,t.jsxs)("div",{className:"stat",children:[null==e.icon?null:(0,t.jsx)("div",{className:"stat-figure",children:e.icon}),null==e.title?null:(0,t.jsx)("div",{className:"stat-title",children:e.title}),null==e.value?null:(0,t.jsx)("div",{className:"stat-value",children:(0,t.jsx)("span",{className:"",children:e.value})}),null==e.caption?null:(0,t.jsx)("div",{className:"stat-desc",children:e.caption})]})},3859:function(e,l,s){"use strict";s.d(l,{i:function(){return N},h:function(){return y}});var t=s(7437),a=s(2265),n=s(4839),r=s(2737),i=s.n(r),c=s(1416),d=s(1907),u=s(728);let o=e=>(0,t.jsx)(d.Z,{language:"javascript",style:u.Z,children:e.code});var x=s(2646),p=s(3418),h=s.n(p);let f="クリップボードにコピーしました。";function m(e){let[l,s]=(0,a.useState)(e.target);return(0,a.useEffect)(()=>{l===f&&setTimeout(()=>{s(e.target)},1e3)},[l,e.target]),(0,t.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":l,children:(0,t.jsx)("button",{className:"btn whitespace-nowrap",onClick:()=>{s(f),h()(e.target)},children:e.text})})}var j=s(7383);let v=e=>(0,t.jsx)("td",{children:e.children}),y=e=>{let l=(0,x.l)([e]);return(0,t.jsx)("div",{className:(0,n.Z)("w-full px-2 perfect-scrollbar py-2 z-0",{border:e.bordered}),ref:l.ref,children:(0,t.jsx)("div",{className:" skeleton h-full w-full animate-fade-in"})})},N=e=>{let l=(0,j.v)(),s=e=>{if(null===e)return"null";switch(typeof e){case"object":if(e instanceof Date)return i()(e).format("YY/MM/DD");if(!("type"in e))return(0,t.jsx)("button",{className:"btn",onClick:()=>{l.open((0,t.jsx)(o,{code:JSON.stringify(e,null,2)}))},children:"JSON"});if("date"===e.type)return i()(e.value).format(e.format);return e.value;case"string":if(e.length<=50)return e;if((0,c.Pb)(e.trim()))return(0,t.jsx)("button",{className:"btn",onClick:()=>{l.open((0,t.jsx)(o,{code:JSON.stringify(JSON.parse(e),null,2)}))},children:"JSON"});if((0,c.CB)(e.trim()))return(0,t.jsx)(m,{text:"URL Data",target:e});return(0,t.jsx)(m,{text:"長文テキスト",target:e});case"undefined":return"undefined";case"function":return"NaN";case"boolean":return e?"true":"false";case"symbol":return"symbol";default:return e}},r=(0,a.useMemo)(()=>"simple"===e.type?{headers:e.head,records:e.target.map(e=>e.map(s))}:"object"===e.type?{headers:e.keyMap.map(e=>{let l=e.displayName||e.keyName;return"symbol"==typeof l?"symbol":l}),records:e.target.map(l=>e.keyMap.map(e=>{let t=l[e.keyName];return null!=e.parse?e.parse(l):null==t?null:s(t)}))}:null,[e]),d=(0,x.l)([e]);if(null!=r)return(0,t.jsx)("div",{className:(0,n.Z)("w-full px-2 perfect-scrollbar z-0",{border:e.bordered}),ref:d.ref,children:(0,t.jsxs)("table",{className:"table table-pin-rows",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[e.consecutive?(0,t.jsx)("th",{children:"#"}):null,r.headers.map((e,l)=>(0,t.jsx)("th",{children:(0,t.jsx)("div",{className:"flex justify-between items-center",children:e})},l))]})}),(0,t.jsx)("tbody",{children:r.records.map((l,s)=>(0,t.jsxs)("tr",{children:[e.consecutive?(0,t.jsx)(v,{children:s+1}):null,l.map((e,l)=>(0,t.jsx)(v,{children:e},l))]},s))})]})})}},4681:function(e,l,s){"use strict";s.d(l,{BroadcastContent:function(){return k}});var t=s(7437),a=s(2265),n=s(1279),r=s(7687),i=s(9151),c=s(3776),d=s(3332),u=s(1825),o=s(2022),x=s(2037),p=s(3859),h=s(1581),f=s(9140);let m=()=>{let e=(0,n.yR)(()=>r.db.getMe(),[]),l=(0,i.we)(null==e?void 0:e.id),s=(0,c.S)(),a=(0,f.L)(),x=(0,o.Gq)(async()=>null==l?null:Promise.all(l.map(async e=>({...await s.fetchById(e.userId),...e})).filter(u.h.notNull)),[l]);return null==x?(0,t.jsx)(p.h,{}):(0,t.jsx)(p.i,{type:"object",target:x,keyMap:[{keyName:"profileImageUrl",displayName:"画像",parse:e=>(0,t.jsx)("img",{src:e.profileImageUrl,onClick:()=>{a(e.userId)},tabIndex:0,alt:e.login,width:35,className:"rounded-full cursor-pointer"})},{keyName:"displayName",displayName:"名前",parse:e=>(0,t.jsx)("p",{onClick:()=>a(e.userId),tabIndex:0,className:" cursor-pointer",children:e.displayName||e.login||"none"})},{keyName:"followedAt",displayName:"フォロー開始日",parse:e=>(0,d.B)(e.followedAt).format("YYYY/MM/DD hh:mm:ss(ddd)")}],consecutive:!0})},j=e=>{let l=(0,n.yR)(()=>r.db.getMe(),[]),s=(0,i.we)(null==l?void 0:l.id);if(null!=s)switch(e.type){case"table":return(0,t.jsx)(m,{});case"list":return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"info"}),(0,t.jsx)("ul",{children:s.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("p",{children:(0,d.B)(e.followedAt).format("YYYY/MM/DD HH:mm:ss")})},e.userId))})]});case"stat":return(0,t.jsx)(x.k,{title:"フォロワー数",value:"".concat(s.length,"人"),icon:h.U.FOLLOW})}},v=()=>{let e=(0,n.yR)(()=>r.db.getLive(),[]);return(0,t.jsx)(x.k,{icon:h.U.EYE,value:"".concat((null==e?void 0:e.viewCount)||0,"人"),title:"ライブ視聴者数"})};var y=s(3979),N=s(4839),b=s(2646);let g=e=>{let l=(0,i._o)(e.userData.id),s=(0,n.yR)(()=>r.db.getMe(),[]),c=(0,a.useCallback)(()=>{confirm("スパムとして認識させますか？")&&l({isSpam:!0})},[e.userData]),d=(0,f.L)(e.userData.id),u=(0,i.we)(null==s?void 0:s.id);if(null!=u)return(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"whitespace-nowrap w-full",children:(0,t.jsx)("a",{className:"link",tabIndex:0,onClick:()=>d(),children:e.userData.displayName||e.userData.login})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"cursor-pointer font-black ",onClick:c,children:"x"})}),(0,t.jsx)("div",{className:"w-4",children:-1!==u.findIndex(l=>l.userId===e.userData.id)?"☑":"☐"})]})},w=e=>{let l=(0,n.yR)(()=>r.db.getMe(),[]),s=(0,n.yR)(()=>r.db.getChatters(),[]),a=(0,c.S)(),i=(0,n.yR)(async()=>{if(null!=l&&null!=s)return(await Promise.all(s.users.map(e=>a.fetchById(e)))).filter(u.h.notNull)},[null==l?void 0:l.id,s]),d=(0,b.l)([s]);switch(e.type){case"number":return(0,t.jsx)("div",{children:null==i?void 0:i.length});case"stat":return(0,t.jsx)(x.k,{title:(0,t.jsx)("div",{className:"flex gap-2",children:"チャットユーザー数"}),value:"".concat(null==i?void 0:i.length,"人"),icon:h.U.COMMENT});case"list":return(0,t.jsx)("div",{className:(0,N.Z)("px-4 py-2 perfect-scrollbar"),ref:d.ref,children:(0,t.jsx)("ul",{children:null==i?void 0:i.filter(e=>e.id!==(null==l?void 0:l.id)).map(e=>(0,t.jsx)(g,{userData:e},e.id))})})}},k=()=>{let[e,l]=(0,a.useState)("viewewr");return(0,t.jsxs)("div",{className:"flex flex-col gap-2 h-full py-2",children:[(0,t.jsx)("div",{className:"h-fit px-2",children:(0,t.jsxs)("div",{className:"flex stats shadow mt-2",children:[(0,t.jsx)(w,{type:"stat"}),(0,t.jsx)(v,{}),(0,t.jsx)(j,{type:"stat"})]})}),(0,t.jsx)("div",{className:"h-96 grow px-2",children:(0,t.jsxs)("div",{className:"flex w-full h-full gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col w-44",children:[(0,t.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"チャットユーザ一覧"}),(0,t.jsx)(w,{type:"list"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-5/12",children:[(0,t.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"フォロワ一覧"}),(0,t.jsx)(j,{type:"table"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-5/12 grow",children:[(0,t.jsxs)("div",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded flex gap-5 items-center justify-between",children:["コメント一覧",(0,t.jsxs)("div",{className:"flex gap-2 items-center select-none",children:[(0,t.jsx)("span",{children:"表示タイプ"}),(0,t.jsxs)("select",{value:e,className:" cursor-pointer select select-xs select-bordered",onChange:e=>l(e.currentTarget.value),children:[(0,t.jsx)("option",{value:"viewewr",children:"Line風"}),(0,t.jsx)("option",{value:"mini",children:"小さめ"}),(0,t.jsx)("option",{value:"flat",children:"最小限"})]})]})]}),(0,t.jsx)(y.j,{type:e,query:{type:"timestamp"}})]})]})})]})}}},function(e){e.O(0,[772,22,76,802,901,140,971,23,744],function(){return e(e.s=8137)}),_N_E=e.O()}]);