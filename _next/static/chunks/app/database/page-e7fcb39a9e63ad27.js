(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{14117:function(e,t,a){Promise.resolve().then(a.bind(a,42081))},97383:function(e,t,a){"use strict";a.d(t,{ModalProvider:function(){return u},v:function(){return i}});var n=a(57437),r=a(2265),l=a(22646);let s=(0,r.createContext)({open:()=>{},close:()=>{}}),i=()=>(0,r.useContext)(s),u=e=>{let[t,a]=(0,r.useState)(null),i=(0,r.useRef)(null),u=(0,l.l)([],{suppressScrollX:!0}),o=(0,r.useCallback)(e=>{var t,n;a(e),null===(t=i.current)||void 0===t||t.showModal(),null===(n=u.refScroll.current)||void 0===n||n.update()},[]),c=(0,r.useCallback)(()=>{var e;null===(e=i.current)||void 0===e||e.close()},[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.Provider,{value:{open:o,close:c},children:e.children}),(0,n.jsxs)("dialog",{ref:i,className:"modal",children:[(0,n.jsx)("div",{className:"modal-box perfect-scrollbar-nopadding h-min",ref:u.ref,children:(0,n.jsx)("div",{children:t})}),(0,n.jsx)("form",{method:"dialog",className:"modal-backdrop",children:(0,n.jsx)("button",{children:"close"})})]})]})}},42081:function(e,t,a){"use strict";a.d(t,{DatabaseViewer:function(){return j}});var n=a(57437),r=a(2265),l=a(67687),s=a(44839),i=a(62737),u=a.n(i),o=a(51416),c=a(81907),d=a(90728);let p=e=>(0,n.jsx)(c.Z,{language:"javascript",style:d.Z,children:e.code});var f=a(22646),m=a(63418),h=a.n(m);let x="クリップボードにコピーしました。";function g(e){let[t,a]=(0,r.useState)(e.target);return(0,r.useEffect)(()=>{t===x&&setTimeout(()=>{a(e.target)},1e3)},[t,e.target]),(0,n.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":t,children:(0,n.jsx)("button",{className:"btn whitespace-nowrap",onClick:()=>{a(x),h()(e.target)},children:e.text})})}var v=a(97383);let y=e=>(0,n.jsx)("td",{children:e.children}),b=e=>{let t=(0,v.v)(),a=e=>{if(null===e)return"null";switch(typeof e){case"object":if(e instanceof Date)return u()(e).format("YY/MM/DD");if(!("type"in e))return(0,n.jsx)("button",{className:"btn",onClick:()=>{t.open((0,n.jsx)(p,{code:JSON.stringify(e,null,2)}))},children:"JSON"});if("date"===e.type)return u()(e.value).format(e.format);return e.value;case"string":if(e.length<=50)return e;if((0,o.Pb)(e.trim()))return(0,n.jsx)("button",{className:"btn",onClick:()=>{t.open((0,n.jsx)(p,{code:JSON.stringify(JSON.parse(e),null,2)}))},children:"JSON"});if((0,o.CB)(e.trim()))return(0,n.jsx)(g,{text:"URL Data",target:e});return(0,n.jsx)(g,{text:"長文テキスト",target:e});case"undefined":return"undefined";case"function":return"NaN";case"boolean":return e?"true":"false";case"symbol":return"symbol";default:return e}},l=(0,r.useMemo)(()=>"simple"===e.type?{headers:e.head,records:e.target.map(e=>e.map(a))}:"object"===e.type?{headers:e.keyMap.map(e=>{let t=e.displayName||e.keyName;return"symbol"==typeof t?"symbol":t}),records:e.target.map(t=>e.keyMap.map(e=>{let n=t[e.keyName];return null!=e.parse?e.parse(t):null==n?null:a(n)}))}:null,[e]),i=(0,f.l)([e]);if(null!=l)return(0,n.jsx)("div",{className:(0,s.Z)("w-full px-2 perfect-scrollbar z-0",{border:e.bordered}),ref:i.ref,children:(0,n.jsxs)("table",{className:"table table-pin-rows",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[e.consecutive?(0,n.jsx)("th",{children:"#"}):null,l.headers.map((e,t)=>(0,n.jsx)("th",{children:(0,n.jsx)("div",{className:"flex justify-between items-center",children:e})},t))]})}),(0,n.jsx)("tbody",{children:l.records.map((t,a)=>(0,n.jsxs)("tr",{children:[e.consecutive?(0,n.jsx)(y,{children:a+1}):null,t.map((e,t)=>(0,n.jsx)(y,{children:e},t))]},a))})]})})};function _(e){let t=(0,l.X1)(e.data,{pageNo:0,pageSize:10},[e]),a=(0,r.useMemo)(()=>null==t.value?[]:Array(...new Set(t.value.target.map(e=>Object.keys(e)).flat().flat()).values()).map(e=>({keyName:e})),[t]);return(0,n.jsx)("div",{className:"w-full flex flex-col gap-10 h-full",children:null==t.value?null:null==t.value.target[0]?(0,n.jsx)("p",{className:"",children:"データが存在しません"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-10 h-96 grow",children:[(0,n.jsx)(b,{type:"object",keyMap:a,target:t.value.target,bordered:!0}),(0,n.jsxs)("div",{className:"flex justify-between w-full h-fit",children:[(0,n.jsx)("button",{className:"btn btn-wide",disabled:!t.value.hasPrev,onClick:t.prev,children:"prev"}),(0,n.jsxs)("div",{children:[t.value.page,"/",t.value.maxPage]}),(0,n.jsx)("button",{className:"btn btn-wide",disabled:!t.value.hasNext,onClick:t.next,children:"next"})]})]})})})}let w=["users","games","broadcastTemplates","actions","followers","channelHistories","listenerHistories"];function j(){let[e,t]=(0,r.useState)(w[0]);return(0,n.jsxs)("div",{className:"flex w-full h-full grow gap-4 p-4",children:[(0,n.jsx)("ul",{className:"flex flex-col w-2/12 gap-5 h-full menu select-none",children:w.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("a",{className:"link w-full",onClick:()=>t(e),children:e})},e))}),(0,n.jsx)("div",{className:"flex w-10/12 grow grow h-full",children:(0,n.jsx)(_,{data:l.db[e]})})]})}},51416:function(e,t,a){"use strict";a.d(t,{CB:function(){return s},G9:function(){return r},Pb:function(){return l}});let n=/[(http(s)?):\/\/(www\.)?a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{start:'<a class="link link-info" href="$&" target="__blank">',end:"</a>"};return e.replace(n,"".concat(t.start,"$&").concat(t.end))},l=e=>{try{return JSON.parse(e),!0}catch(e){return!1}},s=e=>{try{return new URL(e),!0}catch(e){return!1}}},67687:function(e,t,a){"use strict";a.d(t,{X1:function(){return p},db:function(){return f}});var n=a(2265),r=a(78339),l=a(67688),s=a(17645),i=a(11653),u=a(33427),o=a(91279);class c extends u.ZP{async getMe(){let e=await this.parameters.get("me");return(null==e?void 0:e.type)!=="me"?null:e.value||null}async getLive(){let e=await this.parameters.get("live");return(null==e?void 0:e.type)!=="live"?null:e.value||null}async getChatters(){let e=await this.parameters.get("chatters");return(null==e?void 0:e.type)!=="chatters"?null:e.value||null}constructor(){super("twitch-comments"),this.version(30).stores({users:i.zE,games:s.t,actions:r.bY,followers:"++id,channelId,userId,[channelId+userId],createdAt,[channelId+createdAt]",channelHistories:"++id,channelId,type,categoryId,timestamp,[channelId+timestamp]",listenerHistories:"++id,channelId,userId,[channelId+timestamp]",broadcastTemplates:l.b,parameters:"type",spam:"login",settings:"id"})}}let d=async e=>{let t=await e.count();return async a=>({target:await e.offset(a.pageNo*a.pageSize).limit(a.pageSize).toArray(),count:t,page:a.pageNo+1,maxPage:Math.ceil(t/a.pageSize),hasPrev:a.pageNo>=1,hasNext:a.pageNo*a.pageSize<t-a.pageSize})},p=(e,t,a)=>{let[r,l]=(0,n.useState)(t.pageNo);return(0,n.useEffect)(()=>{l(0)},a),{value:(0,o.yR)(async()=>(await d(e))({pageNo:r,pageSize:t.pageSize}),[r,t.pageSize,...a]),next:(0,n.useCallback)(()=>{l(e=>Math.max(e+1,0))},[]),prev:(0,n.useCallback)(()=>{l(e=>Math.max(e-1,0))},[])}},f=new c},78339:function(e,t,a){"use strict";a.d(t,{bY:function(){return i}});var n=a(59772),r=a(87787),l=a(6307),s=a(11653);let i="++autoincrementId,id,*channel,messageType,*userId,*timestamp,[channel+timestamp]",u=n.Ry({autoincrementId:n.Rx().optional(),id:n.Z_(),channel:n.Z_(),userId:s.XM.nullable().default(null),timestamp:n.Rx().optional(),bits:n.Z_().optional(),rowdata:n.Z_().optional()}).and(r.$),o=n.Ry({messageType:n.Km(["chat"]),message:n.Z_(),fragments:l.z.array()}).and(u),c=n.Ry({messageType:n.Km(["reward","atutomatic-reward"]),rewardId:n.Z_(),userTitle:n.Z_(),userInput:n.Z_()}).and(u);o.or(c)},87787:function(e,t,a){"use strict";a.d(t,{$:function(){return r}});var n=a(59772);let r=n.Ry({createdAt:n.hT().optional().default(new Date),updateAt:n.hT().optional().default(new Date),deletedAt:n.hT().optional()})},67688:function(e,t,a){"use strict";a.d(t,{X:function(){return s},b:function(){return l}});var n=a(59772),r=a(87787);let l="++id,channelId,gameId,*tags,favorite",s=n.Ry({id:n.Rx().optional(),channelId:n.Z_().optional(),gameId:n.Z_().optional(),broadcastTitle:n.Z_().max(140,"最大140文字まで入力可能です。").default(""),language:n.Z_(),tags:n.IX(n.Z_()).max(25,"最大のタグ数は25件までです。").default([]),classificationLabels:n.Z_().array().default([]),isBrandedContent:n.O7().default(!1),favorite:n.O7().optional().default(!1)}).and(r.$)},6307:function(e,t,a){"use strict";a.d(t,{z:function(){return d}});var n=a(59772),r=a(11653);let l=n.Ry({user_id:r.XM,user_login:n.Z_(),user_name:n.Z_()}),s=n.Ry({prefix:n.Z_(),bits:n.Rx(),tier:n.Rx()}),i=n.Ry({id:n.Z_(),emote_set_id:n.Z_(),owner_id:n.Z_(),format:n.Z_().array()}),u=n.Ry({type:n.Km(["text"]),text:n.Z_(),cheermote:s.optional(),emote:n.lB(),mention:n.lB()}),o=n.Ry({type:n.Km(["mention"]),text:n.Z_(),cheermote:s.optional(),emote:n.lB(),mention:l}),c=n.Ry({type:n.Km(["emote"]),text:n.Z_(),cheermote:s.optional(),emote:i,mention:n.lB()}),d=u.or(o).or(c)},17645:function(e,t,a){"use strict";a.d(t,{t:function(){return l}});var n=a(59772),r=a(87787);let l="id,igdb_id,name";n.Ry({id:n.Z_(),name:n.Z_(),box_art_url:n.Z_().url(),igdb_id:n.Z_()}).and(r.$)},11653:function(e,t,a){"use strict";a.d(t,{EL:function(){return i},XM:function(){return s},zE:function(){return l}});var n=a(59772),r=a(87787);let l="id,*userId,displayName,type,broadcasterType",s=n.Z_(),i=n.Ry({id:s,displayName:n.Z_().optional(),login:n.Z_(),type:n.Z_().optional(),broadcasterType:n.Z_().optional(),description:n.Z_().optional(),profileImageUrl:n.Z_().optional(),offlineImageUrl:n.Z_().optional(),metaComment:n.Z_().optional(),isSpam:n.O7().optional().default(!1),rowData:n.Z_().optional()}).and(r.$)},51938:function(e,t,a){"use strict";a.d(t,{Y:function(){return r}});var n=a(2265);let r=(e,t)=>{let{interval:a,deps:r,notFirst:l}=t;(0,n.useEffect)(()=>{l||setTimeout(e,0);let t=window.setInterval(e,a);return()=>{window.clearTimeout(t)}},[a,...r])}},22646:function(e,t,a){"use strict";a.d(t,{l:function(){return s}});var n=a(2265),r=a(30416),l=a(51938);let s=(e,t)=>{let a=(0,n.useRef)(null),s=(0,n.useRef)(null);return(0,n.useLayoutEffect)(()=>{if(null==a.current)return;let e=new r.Z(a.current,t);s.current=e,e.update();let n=new ResizeObserver(()=>{e.update()});return n.observe(a.current),()=>{null!=s.current&&(s.current.destroy(),s.current=null,n.disconnect())}},[]),(0,n.useLayoutEffect)(()=>{var e;null===(e=s.current)||void 0===e||e.update()},e),(0,l.Y)(()=>{var e;null===(e=s.current)||void 0===e||e.update()},{interval:300,deps:[]}),{ref:a,refScroll:s}}}},function(e){e.O(0,[772,22,729,971,23,744],function(){return e(e.s=14117)}),_N_E=e.O()}]);