"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{3274:function(e,t,l){l.r(t),l.d(t,{Drawer:function(){return o},DrawerOpener:function(){return c}});var s=l(3827),a=l(4090);let n="notification-drawer-001",r=(0,a.createContext)([]),i=()=>(0,a.useContext)(r),c=e=>(0,s.jsx)("label",{htmlFor:n,className:"cursor-pointer",children:e.children}),d=e=>{let t=i();return(0,s.jsxs)("div",{className:"drawer drawer-end",children:[(0,s.jsx)("input",{id:n,type:"checkbox",className:"drawer-toggle"}),(0,s.jsx)("div",{className:"drawer-content",children:e.children}),(0,s.jsxs)("div",{className:"drawer-side",children:[(0,s.jsx)("label",{htmlFor:n,"aria-label":"close sidebar",className:"drawer-overlay"}),(0,s.jsx)("ul",{className:"menu p-4 w-80 min-h-full bg-base-200 text-base-content",children:t.map((e,t)=>(0,s.jsx)("li",{children:e},t))})]})]})},o=e=>(0,s.jsxs)(r.Provider,{value:["test"],children:[e.children,(0,s.jsx)(d,{})]})},7244:function(e,t,l){l.d(t,{i:function(){return N}});var s=l(3827),a=l(4090),n=l(3167),r=l(9539),i=l.n(r),c=l(7861),d=l(625),o=l(8346);let u=e=>(0,s.jsx)(d.Z,{language:"javascript",style:o.Z,children:e.code});var x=l(5835),m=l(9517),h=l.n(m);let p="クリップボードにコピーしました。";function f(e){let[t,l]=(0,a.useState)(e.target);return(0,a.useEffect)(()=>{t===p&&setTimeout(()=>{l(e.target)},1e3)},[t,e.target]),(0,s.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":t,children:(0,s.jsx)("button",{className:"btn whitespace-nowrap",onClick:()=>{l(p),h()(e.target)},children:e.text})})}var j=l(2447);let v=e=>(0,s.jsx)("td",{children:e.children}),N=e=>{let t=(0,j.useModalContext)(),l=e=>{if(null===e)return"null";switch(typeof e){case"object":if(e instanceof Date)return i()(e).format("YY/MM/DD");if(!("type"in e))return(0,s.jsx)("button",{className:"btn",onClick:()=>{t.open((0,s.jsx)(u,{code:JSON.stringify(e,null,2)}))},children:"JSON"});if("date"===e.type)return i()(e.value).format(e.format);return e.value;case"string":if(e.length<=50)return e;if((0,c.Pb)(e.trim()))return(0,s.jsx)("button",{className:"btn",onClick:()=>{t.open((0,s.jsx)(u,{code:JSON.stringify(JSON.parse(e),null,2)}))},children:"JSON"});if(c.s7.test(e.trim()))return(0,s.jsx)(f,{text:"URL Data",target:e});return(0,s.jsx)(f,{text:"長文テキスト",target:e});case"undefined":return"undefined";case"function":return"NaN";case"boolean":return e?"true":"false";case"symbol":return"symbol";default:return e}},r=(0,a.useMemo)(()=>"simple"===e.type?{headers:e.head,records:e.target.map(e=>e.map(l))}:"object"===e.type?{headers:e.keyMap.map(e=>{let t=e.displayName||e.keyName;return"symbol"==typeof t?"symbol":t}),records:e.target.map(t=>e.keyMap.map(e=>{let s=t[e.keyName];return null!=e.parse?e.parse(t):null==s?null:l(s)}))}:null,[e]),d=(0,x.l)([e]);if(null!=r)return(0,s.jsx)("div",{className:(0,n.Z)("w-full px-2 perfect-scrollbar z-0",{border:e.bordered}),ref:d.ref,children:(0,s.jsxs)("table",{className:"table table-pin-rows",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[e.consecutive?(0,s.jsx)("th",{children:"#"}):null,r.headers.map((e,t)=>(0,s.jsx)("th",{children:(0,s.jsx)("div",{className:"flex justify-between items-center",children:e})},t))]})}),(0,s.jsx)("tbody",{children:r.records.map((t,l)=>(0,s.jsxs)("tr",{children:[e.consecutive?(0,s.jsx)(v,{children:l+1}):null,t.map((e,t)=>(0,s.jsx)(v,{children:e},t))]},l))})]})})}},7252:function(e,t,l){l.r(t),l.d(t,{BroadcastContent:function(){return O},Footer:function(){return T}});var s=l(3827),a=l(8792),n=l(7907),r=l(3167),i=l(3748),c=l(4090),d=l(670),o=l(5835);let u=e=>(0,s.jsxs)("div",{className:"stat",children:[null==e.icon?null:(0,s.jsx)("div",{className:"stat-figure",children:e.icon}),null==e.title?null:(0,s.jsx)("div",{className:"stat-title",children:e.title}),null==e.value?null:(0,s.jsx)("div",{className:"stat-value",children:(0,s.jsx)("span",{className:"",children:e.value})}),null==e.caption?null:(0,s.jsx)("div",{className:"stat-desc",children:e.caption})]});var x=l(8903),m=l(7902);let h=e=>{let t=(0,d._o)(e.userData.id),l=(0,i.useEventSubContext)(),a=(0,c.useCallback)(()=>{confirm("スパムとして認識させますか？")&&t({isSpam:!0})},[e.userData]),n=(0,m.L)(),r=(0,d.we)(null==l?void 0:l.me.id);if(null!=l&&null!=r)return(0,s.jsxs)("li",{className:"flex gap-2",children:[(0,s.jsx)("div",{className:"whitespace-nowrap w-full",children:(0,s.jsx)("a",{className:"link",tabIndex:0,onClick:()=>n,children:e.userData.displayName||e.userData.login})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"cursor-pointer font-black ",onClick:a,children:"x"})}),(0,s.jsx)("div",{className:"w-4",children:-1!==r.findIndex(t=>t.userId===e.userData.id)?"☑":"☐"})]})},p=e=>{let t=(0,i.useEventSubContext)(),l=(0,c.useMemo)(()=>{if((null==t?void 0:t.chatUsers)!=null)return t.chatUsers.sort((e,t)=>Number(e.id||"")<Number(t.id||"")?1:-1)},[null==t?void 0:t.chatUsers]),a=(0,o.l)([null==t?void 0:t.chatUsers]);if(null!=l)switch(e.type){case"number":return(0,s.jsx)("div",{children:l.length});case"stat":return(0,s.jsx)(u,{title:(0,s.jsxs)("div",{className:"flex gap-2",children:["チャットユーザー数"," ",(0,s.jsx)("span",{className:"tooltip tooltip-bottom tooltip-info","data-tip":"`反映までには多少ラグが発生します。",children:x.U.INFORMATION})]}),value:"".concat(l.length,"人"),icon:x.U.COMMENT});case"list":return(0,s.jsx)("div",{className:(0,r.Z)("px-4 py-2 perfect-scrollbar"),ref:a.ref,children:(0,s.jsx)("ul",{children:l.filter(e=>e.id!==(null==t?void 0:t.me.id)).map(e=>(0,s.jsx)(h,{userData:e},e.id))})})}};var f=l(3121),j=l(863);let v=()=>{let[e,t]=(0,c.useState)({date:"0000/00/00",time:"00:00",daysOfWeek:"月"});return(0,j.Y)(()=>{let e=(0,f.B)(new Date);t({date:e.format("YYYY/MM/DD"),time:e.format("HH:mm"),daysOfWeek:e.format("ddd")})},{interval:1e3,deps:[]}),(0,s.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,s.jsxs)("div",{className:"flex justify-between w-full",children:[(0,s.jsx)("div",{className:"countdown text-xs",children:e.time}),(0,s.jsxs)("div",{className:"countdown text-xs",children:["(",e.daysOfWeek,")"]})]}),(0,s.jsx)("div",{className:"countdown text-xs",children:e.date})]})},N=e=>{let[t,l]=(0,c.useState)("00:00:00"),a=new Intl.NumberFormat("ja",{minimumIntegerDigits:2});return(0,c.useEffect)(()=>{if(null!=e.pause||null==e.startMilliSeconds)return;let t=e.startMilliSeconds,s=window.setInterval(()=>{let s=new Date(Date.now()-t),n=e.containsTimeZone?-s.getTimezoneOffset()/60:0;l("".concat(a.format((s.getUTCHours()+n+24)%24),":").concat(a.format(s.getUTCMinutes()),":").concat(a.format(s.getUTCSeconds())))},1e3);return()=>{window.clearInterval(s)}},[e.startMilliSeconds,e.pause]),(0,s.jsx)("span",{className:" text-xs",children:(0,s.jsx)("span",{children:t})})};var b=l(3274),w=l(66),g=l(8473),y=l(7244);let k=()=>{let e=(0,i.useEventSubContext)(),t=(0,d.we)(null==e?void 0:e.me.id),l=(0,w.useGetUserMap)((null==t?void 0:t.map(e=>e.userId))||[]),a=(0,m.L)(),n=(0,c.useMemo)(()=>null==t||null==l?[]:t.map(e=>{let t=l.get(e.userId);if(null!=t)return{...t,...e}}).filter(g.h.notNull),[t,l]);return(0,s.jsx)(y.i,{type:"object",target:n,keyMap:[{keyName:"profileImageUrl",displayName:"画像",parse:e=>(0,s.jsx)("img",{src:e.profileImageUrl,onClick:()=>{a(e.userId)},tabIndex:0,alt:e.login,width:35,className:"rounded-full cursor-pointer"})},{keyName:"displayName",displayName:"名前",parse:e=>(0,s.jsx)("p",{onClick:()=>a(e.userId),tabIndex:0,className:" cursor-pointer",children:e.displayName||e.login||"none"})},{keyName:"followedAt",displayName:"フォロー開始日",parse:e=>(0,f.B)(e.followedAt).format("YYYY/MM/DD hh:mm:ss(ddd)")}],consecutive:!0})},C=e=>{let t=(0,i.useEventSubContext)(),l=(0,d.we)(null==t?void 0:t.me.id);if(null!=l)switch(e.type){case"table":return(0,s.jsx)(k,{});case"list":return(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{children:"info"}),(0,s.jsx)("ul",{children:l.map(e=>(0,s.jsx)("li",{children:(0,s.jsx)("p",{children:(0,f.B)(e.followedAt).format("YYYY/MM/DD HH:mm:ss")})},e.userId))})]});case"stat":return(0,s.jsx)(u,{title:"フォロワー数",value:"".concat(l.length,"人"),icon:x.U.FOLLOW})}},M=()=>{var e;let t=(0,i.useEventSubContext)();return(0,s.jsx)(u,{icon:x.U.EYE,value:"".concat((null==t?void 0:null===(e=t.live)||void 0===e?void 0:e.viewerCount)||0,"人"),title:"ライブ視聴者数"})};var I=l(3858),D=l(1863),S=function(e){return(0,s.jsx)("svg",{className:e.className,xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",fill:"none",viewBox:"0 0 21 21",children:(0,s.jsx)("path",{stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",d:"M18.5 8.5v-5m0 0h-5m5 0l-7 7m-1-7h-5a2 2 0 00-2 2v10a2 2 0 002 2h11a2 2 0 002-2v-4"})})};let U=()=>{let e=(0,i.useEventSubContext)(),t=(0,d.bL)(),l=(0,c.useMemo)(()=>{if(null!=e&&null!=t)return t.get(e.me.id)},[e,t]),a=(0,c.useMemo)(()=>null==e?null:(0,D.yd)(e.me.channelName),[e]);return(0,s.jsxs)("div",{className:"dropdown dropdown-top",style:{lineHeight:0},children:[(0,s.jsx)("div",{className:"avatar",tabIndex:0,role:"button",children:(0,s.jsx)("div",{className:(0,r.Z)("w-12 h-12 rounded-full border border-primary",{skeleton:(null==l?void 0:l.profileImageUrl)==null}),children:(null==l?void 0:l.profileImageUrl)!=null?(0,s.jsx)("img",{src:l.profileImageUrl}):null})}),null==a?null:(0,s.jsxs)("ul",{className:"p-2 shadow menu dropdown-content z-[1] bg-base-100 text-base-content dasy-rounded w-52 border",tabIndex:0,children:[(0,s.jsx)("li",{children:(0,s.jsxs)("a",{className:"link flex gap-x-2",target:"_blank",href:a.CHANNEL,children:["チャンネルへ ",(0,s.jsx)(S,{className:"scale-90 origin-center"})]})}),(0,s.jsx)("li",{children:(0,s.jsxs)("a",{className:"link flex gap-x-2",target:"_blank",href:a.STREAM_MANAGER,children:["チャンネルマネージャーへ",(0,s.jsx)(S,{className:"scale-90 origin-center"})]})}),(0,s.jsx)("li",{onClick:()=>{(0,D.HB)(),location.reload()},children:(0,s.jsx)("a",{children:"ログアウト"})})]})]})},E=[{icon:x.U.BROADCAST,text:"ライブ",path:"/"},{icon:x.U.GAME,text:"ゲーム",path:"/games"},{icon:x.U.DATABASE,text:"集計データ",path:"/database"},{icon:x.U.GEAR,text:"設定",path:"/setting"}],O=()=>{if(null!=(0,i.useEventSubContext)())return(0,s.jsxs)("div",{className:"flex flex-col gap-2 h-full py-2",children:[(0,s.jsx)("div",{className:"h-fit px-2",children:(0,s.jsxs)("div",{className:"flex stats shadow mt-2",children:[(0,s.jsx)(p,{type:"stat"}),(0,s.jsx)(M,{}),(0,s.jsx)(C,{type:"stat"})]})}),(0,s.jsx)("div",{className:"h-96 grow px-2",children:(0,s.jsxs)("div",{className:"flex w-full h-full gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"チャットユーザ一覧"}),(0,s.jsx)(p,{type:"list"})]}),(0,s.jsxs)("div",{className:"grow flex flex-col",children:[(0,s.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"フォロワ一覧"}),(0,s.jsx)(C,{type:"table"})]}),(0,s.jsxs)("div",{className:"flex flex-col w-2/6",children:[(0,s.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"コメント一覧"}),(0,s.jsx)(I.j,{})]})]})})]})},A=e=>{let t=e.active||!1,l=(0,r.Z)({"opacity-50":!t,"opacity-100":t},"transition-opacity transition-transform");return(0,s.jsxs)(a.default,{className:(0,r.Z)("flex flex-col items-center cursor-pointer h-full justify-between w-16 whitespace-nowrap",l),href:e.path,as:e.path,children:[(0,s.jsx)("span",{children:e.icon}),(0,s.jsx)("p",{className:"text-xs font-black ",children:e.text})]})},Y=()=>{let e=(0,n.usePathname)();return(0,s.jsx)("nav",{className:"flex gap-4 grow items-end",children:E.map(t=>(0,s.jsx)(A,{...t,active:t.path===e},t.path))})},T=()=>{var e,t;let l=(0,i.useEventSubContext)();if(null!=l)return(0,s.jsx)("footer",{className:"footer items-center bg-primary flex text-primary-content sticky bottom-0 h-fit mt-auto py-3 px-4",children:(0,s.jsxs)("div",{className:"flex gap-4 items-center grow",children:[(0,s.jsx)(U,{}),(0,s.jsx)(Y,{}),(0,s.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-xs",children:"配信時間"}),(0,s.jsx)(N,{startMilliSeconds:null===(t=l.live)||void 0===t?void 0:null===(e=t.startedAt)||void 0===e?void 0:e.getTime()})]}),(0,s.jsx)("div",{children:(0,s.jsx)(v,{})}),(0,s.jsx)("div",{children:(0,s.jsx)(b.DrawerOpener,{children:x.U.NOTIFICATION})})]})]})})}}}]);