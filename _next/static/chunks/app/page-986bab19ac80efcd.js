(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8137:function(e,l,s){Promise.resolve().then(s.bind(s,4681))},2037:function(e,l,s){"use strict";s.d(l,{k:function(){return a}});var t=s(7437);let a=e=>(0,t.jsxs)("div",{className:"stat",children:[null==e.icon?null:(0,t.jsx)("div",{className:"stat-figure",children:e.icon}),null==e.title?null:(0,t.jsx)("div",{className:"stat-title",children:e.title}),null==e.value?null:(0,t.jsx)("div",{className:"stat-value",children:(0,t.jsx)("span",{className:"",children:e.value})}),null==e.caption?null:(0,t.jsx)("div",{className:"stat-desc",children:e.caption})]})},3859:function(e,l,s){"use strict";s.d(l,{i:function(){return y},h:function(){return b}});var t=s(7437),a=s(2265),n=s(4839),r=s(2737),i=s.n(r),c=s(1416),d=s(1907),u=s(728);let o=e=>(0,t.jsx)(d.Z,{language:"javascript",style:u.Z,children:e.code});var x=s(2646),p=s(3418),f=s.n(p);let h="クリップボードにコピーしました。";function m(e){let[l,s]=(0,a.useState)(e.target);return(0,a.useEffect)(()=>{l===h&&setTimeout(()=>{s(e.target)},1e3)},[l,e.target]),(0,t.jsx)("div",{className:"tooltip tooltip-bottom","data-tip":l,children:(0,t.jsx)("button",{className:"btn whitespace-nowrap",onClick:()=>{s(h),f()(e.target)},children:e.text})})}var j=s(7383);let N=e=>(0,t.jsx)("td",{children:e.children}),b=e=>{let l=(0,x.l)([e]);return(0,t.jsx)("div",{className:(0,n.Z)("w-full px-2 perfect-scrollbar py-2 z-0",{border:e.bordered}),ref:l.ref,children:(0,t.jsx)("div",{className:" skeleton h-full w-full animate-fade-in"})})},y=e=>{let l=(0,j.v)(),s=e=>{if(null===e)return"null";switch(typeof e){case"object":if(e instanceof Date)return i()(e).format("YY/MM/DD");if(!("type"in e))return(0,t.jsx)("button",{className:"btn",onClick:()=>{l.open((0,t.jsx)(o,{code:JSON.stringify(e,null,2)}))},children:"JSON"});if("date"===e.type)return i()(e.value).format(e.format);return e.value;case"string":if(e.length<=50)return e;if((0,c.Pb)(e.trim()))return(0,t.jsx)("button",{className:"btn",onClick:()=>{l.open((0,t.jsx)(o,{code:JSON.stringify(JSON.parse(e),null,2)}))},children:"JSON"});if(c.s7.test(e.trim()))return(0,t.jsx)(m,{text:"URL Data",target:e});return(0,t.jsx)(m,{text:"長文テキスト",target:e});case"undefined":return"undefined";case"function":return"NaN";case"boolean":return e?"true":"false";case"symbol":return"symbol";default:return e}},r=(0,a.useMemo)(()=>"simple"===e.type?{headers:e.head,records:e.target.map(e=>e.map(s))}:"object"===e.type?{headers:e.keyMap.map(e=>{let l=e.displayName||e.keyName;return"symbol"==typeof l?"symbol":l}),records:e.target.map(l=>e.keyMap.map(e=>{let t=l[e.keyName];return null!=e.parse?e.parse(l):null==t?null:s(t)}))}:null,[e]),d=(0,x.l)([e]);if(null!=r)return(0,t.jsx)("div",{className:(0,n.Z)("w-full px-2 perfect-scrollbar z-0",{border:e.bordered}),ref:d.ref,children:(0,t.jsxs)("table",{className:"table table-pin-rows",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[e.consecutive?(0,t.jsx)("th",{children:"#"}):null,r.headers.map((e,l)=>(0,t.jsx)("th",{children:(0,t.jsx)("div",{className:"flex justify-between items-center",children:e})},l))]})}),(0,t.jsx)("tbody",{children:r.records.map((l,s)=>(0,t.jsxs)("tr",{children:[e.consecutive?(0,t.jsx)(N,{children:s+1}):null,l.map((e,l)=>(0,t.jsx)(N,{children:e},l))]},s))})]})})}},4681:function(e,l,s){"use strict";s.d(l,{BroadcastContent:function(){return k}});var t=s(7437),a=s(1279),n=s(7687),r=s(9151),i=s(3776),c=s(3332),d=s(1825),u=s(2022),o=s(2037),x=s(3859),p=s(1581),f=s(9140);let h=()=>{let e=(0,a.yR)(()=>n.db.getMe(),[]),l=(0,r.we)(null==e?void 0:e.id),s=(0,i.S)(),o=(0,f.L)(),p=(0,u.Gq)(async()=>null==l?null:Promise.all(l.map(async e=>({...await s.fetchById(e.userId),...e})).filter(d.h.notNull)),[l]);return null==p?(0,t.jsx)(x.h,{}):(0,t.jsx)(x.i,{type:"object",target:p,keyMap:[{keyName:"profileImageUrl",displayName:"画像",parse:e=>(0,t.jsx)("img",{src:e.profileImageUrl,onClick:()=>{o(e.userId)},tabIndex:0,alt:e.login,width:35,className:"rounded-full cursor-pointer"})},{keyName:"displayName",displayName:"名前",parse:e=>(0,t.jsx)("p",{onClick:()=>o(e.userId),tabIndex:0,className:" cursor-pointer",children:e.displayName||e.login||"none"})},{keyName:"followedAt",displayName:"フォロー開始日",parse:e=>(0,c.B)(e.followedAt).format("YYYY/MM/DD hh:mm:ss(ddd)")}],consecutive:!0})},m=e=>{let l=(0,a.yR)(()=>n.db.getMe(),[]),s=(0,r.we)(null==l?void 0:l.id);if(null!=s)switch(e.type){case"table":return(0,t.jsx)(h,{});case"list":return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"info"}),(0,t.jsx)("ul",{children:s.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("p",{children:(0,c.B)(e.followedAt).format("YYYY/MM/DD HH:mm:ss")})},e.userId))})]});case"stat":return(0,t.jsx)(o.k,{title:"フォロワー数",value:"".concat(s.length,"人"),icon:p.U.FOLLOW})}},j=()=>{let e=(0,a.yR)(()=>n.db.getLive(),[]);return(0,t.jsx)(o.k,{icon:p.U.EYE,value:"".concat((null==e?void 0:e.viewCount)||0,"人"),title:"ライブ視聴者数"})};var N=s(1312),b=s(2265),y=s(4839),v=s(2646);let g=e=>{let l=(0,r._o)(e.userData.id),s=(0,a.yR)(()=>n.db.getMe(),[]),i=(0,b.useCallback)(()=>{confirm("スパムとして認識させますか？")&&l({isSpam:!0})},[e.userData]),c=(0,f.L)(e.userData.id),d=(0,r.we)(null==s?void 0:s.id);if(null!=d)return(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("div",{className:"whitespace-nowrap w-full",children:(0,t.jsx)("a",{className:"link",tabIndex:0,onClick:()=>c(),children:e.userData.displayName||e.userData.login})}),(0,t.jsx)("div",{children:(0,t.jsx)("a",{className:"cursor-pointer font-black ",onClick:i,children:"x"})}),(0,t.jsx)("div",{className:"w-4",children:-1!==d.findIndex(l=>l.userId===e.userData.id)?"☑":"☐"})]})},w=e=>{let l=(0,a.yR)(()=>n.db.getMe(),[]),s=(0,a.yR)(()=>n.db.getChatters(),[]),r=(0,i.S)(),c=(0,u.Gq)(async()=>{if(null!=l&&null!=s)return(await Promise.all(s.users.map(e=>r.fetchById(e)))).filter(d.h.notNull)},[null==l?void 0:l.id,s]),x=(0,v.l)([s]);if(null!=c)switch(e.type){case"number":return(0,t.jsx)("div",{children:c.length});case"stat":return(0,t.jsx)(o.k,{title:(0,t.jsx)("div",{className:"flex gap-2",children:"チャットユーザー数"}),value:"".concat(c.length,"人"),icon:p.U.COMMENT});case"list":return(0,t.jsx)("div",{className:(0,y.Z)("px-4 py-2 perfect-scrollbar"),ref:x.ref,children:(0,t.jsx)("ul",{children:c.filter(e=>e.id!==(null==l?void 0:l.id)).map(e=>(0,t.jsx)(g,{userData:e},e.id))})})}},k=()=>(0,t.jsxs)("div",{className:"flex flex-col gap-2 h-full py-2",children:[(0,t.jsx)("div",{className:"h-fit px-2",children:(0,t.jsxs)("div",{className:"flex stats shadow mt-2",children:[(0,t.jsx)(w,{type:"stat"}),(0,t.jsx)(j,{}),(0,t.jsx)(m,{type:"stat"})]})}),(0,t.jsx)("div",{className:"h-96 grow px-2",children:(0,t.jsxs)("div",{className:"flex w-full h-full gap-2",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"チャットユーザ一覧"}),(0,t.jsx)(w,{type:"list"})]}),(0,t.jsxs)("div",{className:"grow flex flex-col",children:[(0,t.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"フォロワ一覧"}),(0,t.jsx)(m,{type:"table"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-2/6",children:[(0,t.jsx)("p",{className:"whitespace-nowrap px-4 py-2 font-black text-xs bg-base-300 text-base-content dasy-rounded",children:"コメント一覧"}),(0,t.jsx)(N.j,{})]})]})})]})}},function(e){e.O(0,[22,76,802,901,140,971,23,744],function(){return e(e.s=8137)}),_N_E=e.O()}]);