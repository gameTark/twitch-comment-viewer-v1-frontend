!function(){var e,t,s,a,n,i,o={55940:function(e,t,s){"use strict";var a=s(59772);let n=a.Ry({createdAt:a.hT().optional().default(new Date),updateAt:a.hT().optional().default(new Date),deletedAt:a.hT().optional()}),i=a.Z_();a.Ry({id:i,displayName:a.Z_().optional(),login:a.Z_(),type:a.Z_().optional(),broadcasterType:a.Z_().optional(),description:a.Z_().optional(),profileImageUrl:a.Z_().optional(),offlineImageUrl:a.Z_().optional(),metaComment:a.Z_().optional(),isSpam:a.O7().optional().default(!1),rowData:a.Z_().optional()}).and(n);let o=a.Ry({id:a.Rx().optional(),channelId:i,tpye:a.Km(["update","offline","online"]),broadcastTitle:a.Z_(),categoryId:a.Z_(),categoryName:a.Z_(),language:a.Z_(),timestamp:a.hT().default(new Date),rowdata:a.Z_().optional()}).and(n);s(2265);let r=a.Ry({user_id:i,user_login:a.Z_(),user_name:a.Z_()}),d=a.Ry({prefix:a.Z_(),bits:a.Rx(),tier:a.Rx()}),l=a.Ry({id:a.Z_(),emote_set_id:a.Z_(),owner_id:a.Z_(),format:a.Z_().array()}),c=a.Ry({type:a.Km(["text"]),text:a.Z_(),cheermote:d.optional(),emote:a.lB(),mention:a.lB()}),_=a.Ry({type:a.Km(["mention"]),text:a.Z_(),cheermote:d.optional(),emote:a.lB(),mention:r}),u=a.Ry({type:a.Km(["emote"]),text:a.Z_(),cheermote:d.optional(),emote:l,mention:a.lB()}),p=c.or(_).or(u),m=a.Ry({autoincrementId:a.Rx().optional(),id:a.Z_(),channel:a.Z_(),userId:i.nullable().default(null),timestamp:a.Rx().optional(),bits:a.Z_().optional(),rowdata:a.Z_().optional()}).and(n),g=a.Ry({messageType:a.Km(["chat"]),message:a.Z_(),fragments:p.array()}).and(m),h=a.Ry({messageType:a.Km(["reward","atutomatic-reward"]),rewardId:a.Z_(),userTitle:a.Z_(),userInput:a.Z_()}).and(m);g.or(h),a.Ry({id:a.Rx().optional(),channelId:a.Z_().optional(),gameId:a.Z_().optional(),broadcastTitle:a.Z_().max(140,"最大140文字まで入力可能です。").default(""),language:a.Z_(),tags:a.IX(a.Z_()).max(25,"最大のタグ数は25件までです。").default([]),classificationLabels:a.Z_().array().default([]),isBrandedContent:a.O7().default(!1),favorite:a.O7().optional().default(!1)}).and(n),a.Ry({id:a.Rx().optional(),channelId:i,userId:i,followedAt:a.hT()}).and(n),a.Ry({id:a.Z_(),name:a.Z_(),box_art_url:a.Z_().url(),igdb_id:a.Z_()}).and(n);var v=s(33427);s(91279);class y extends v.ZP{async getMe(){let e=await this.parameters.get("me");if((null==e?void 0:e.type)!=null&&"me"===e.type&&null!=e.value)return e.value}async getLive(){let e=await this.parameters.get("live");return(null==e?void 0:e.type)==null||"live"!==e.type||null==e.value?{isLive:!1,viewCount:0,startedAt:null}:e.value}async getChatters(){let e=await this.parameters.get("chatters");return(null==e?void 0:e.type)==null||"chatters"!==e.type||null==e.value?{users:[],total:0}:e.value}constructor(){super("twitch-comments"),this.version(30).stores({users:"id,*userId,displayName,type,broadcasterType",games:"id,igdb_id,name",actions:"++autoincrementId,id,*channel,messageType,*userId,*timestamp,[channel+timestamp]",followers:"++id,channelId,userId,[channelId+userId],createdAt,[channelId+createdAt]",channelHistories:"++id,channelId,type,categoryId,timestamp,[channelId+timestamp]",listenerHistories:"++id,channelId,userId,[channelId+timestamp]",broadcastTemplates:"++id,channelId,gameId,*tags,favorite",parameters:"type",spam:"login",settings:"id"})}}let f=new y;var w=s(96392);let{API_KEY:b}={CLASSIFICATION_LABELS:[{name:"薬物・酩酊・過度の喫煙",id:"DrugsIntoxication",description:"タバコの過度な賛美・宣伝、マリファナの摂取・使用、合法薬物やアルコールによる酩酊、違法薬物の話題。"},{name:"性的なテーマ",id:"SexualThemes",description:"実際に金銭のやり取りが発生する、オンラインまたは対面式のギャンブル、ポーカー、ファンタジースポーツへの参加。"},{name:"著しい冒涜や下品な表現",id:"ProfanityVulgarity",description:"特に通常の会話内での、猥褻的・冒涜的・下品な表現の頻繁な使用。"},{name:"ギャンブル",id:"Gambling",description:"実際に金銭のやり取りが発生する、オンラインまたは対面式のギャンブル、ポーカー、ファンタジースポーツへの参加。"},{name:"暴力的で露骨な描写",id:"ViolentGraphic",description:"リアルな暴力、流血、重傷、死のシミュレーションや描写。"}],BROADCAST_LANGUAGE:[{id:"ja",name:"日本語"},{id:"en",name:"English"},{id:"id",name:"Bahasa Indonesia"},{id:"ca",name:"Catal\xe0"},{id:"da",name:"Dansk"},{id:"de",name:"Deutsch"},{id:"es",name:"Espa\xf1ol"},{id:"fr",name:"Fran\xe7ais"},{id:"it",name:"Italiano"},{id:"hu",name:"Magyar"},{id:"nl",name:"Nederlands"},{id:"no",name:"Norsk"},{id:"pl",name:"Polski"},{id:"pt",name:"Portugu\xeas"},{id:"ro",name:"Rom\xe2nă"},{id:"sk",name:"Slovenčina"},{id:"fi",name:"Suomi"},{id:"sv",name:"Svenska"},{id:"tl",name:"Tagalog"},{id:"vi",name:"Tiếng Việt"},{id:"tr",name:"T\xfcrk\xe7e"},{id:"cs",name:"Čeština"},{id:"el",name:"Ελληνικά"},{id:"bg",name:"Български"},{id:"ru",name:"Русский"},{id:"uk",name:"ภาษาไทย"},{id:"zh",name:"中文"},{id:"zh-hk",name:"粵語"},{id:"ko",name:"한국어"},{id:"asl",name:"American Sign Language"},{id:"other",name:"その他"}],API_KEY:"of40zatnkd1ftcaqnf92ahqznkg1vn"},x=async()=>{let e=await f.settings.get("twitch_token");if(null==e)throw Error("twitch token is not found");return e.value},I=e=>{let t={Authorization:"Bearer ".concat(e),"Client-Id":b,"Content-Type":"application/json"};return function(){for(var e=arguments.length,s=Array(e),a=0;a<e;a++)s[a]=arguments[a];let[n,i,...o]=s;return fetch(n,{...i,headers:{...t,...(null==i?void 0:i.headers)||{}}},...o)}},k=(e,t)=>async s=>{let{parameters:a,requestBody:n}=s,i=I(await x()),o=Object.entries(a||{}).map(e=>{let[t,s]=e;return Array.isArray(s)?s.map(e=>"".concat(t,"=").concat(decodeURIComponent(e))).join("&"):"string"==typeof s?"".concat(t,"=").concat(decodeURIComponent(s)):"".concat(t,"=").concat(s)}).join("&"),r=await i("https://api.twitch.tv/helix".concat(e,"?").concat(o),{method:t.toString().toUpperCase(),body:null==n?void 0:JSON.stringify(n)});return"patch"===t?{}:await r.json()},Z={fetchByAll:e=>async t=>{let s=async t=>{var a;let n=await e(t);if((null===(a=n.pagination)||void 0===a?void 0:a.cursor)!=null){let e=await s({...t,parameters:{...t.parameters,after:n.pagination.cursor}});return{...e,data:[...n.data,...e.data]}}return n};return s(t)},createEventsub:async e=>await Z.eventsub_subscriptions_post({requestBody:e}),channels_commercial_post:k("/channels/commercial","post"),channels_ads_get:k("/channels/ads","get"),channels_ads_schedule_snooze_post:k("/channels/ads/schedule/snooze","post"),analytics_extensions_get:k("/analytics/extensions","get"),analytics_games_get:k("/analytics/games","get"),bits_leaderboard_get:k("/bits/leaderboard","get"),bits_cheermotes_get:k("/bits/cheermotes","get"),extensions_transactions_get:k("/extensions/transactions","get"),channels_get:k("/channels","get"),channels_patch:k("/channels","patch"),channels_editors_get:k("/channels/editors","get"),channels_followed_get:k("/channels/followed","get"),channels_followers_get:k("/channels/followers","get"),channel_points_custom_rewards_post:k("/channel_points/custom_rewards","post"),channel_points_custom_rewards_delete:k("/channel_points/custom_rewards","delete"),channel_points_custom_rewards_get:k("/channel_points/custom_rewards","get"),channel_points_custom_rewards_redemptions_get:k("/channel_points/custom_rewards/redemptions","get"),channel_points_custom_rewards_patch:k("/channel_points/custom_rewards","patch"),channel_points_custom_rewards_redemptions_patch:k("/channel_points/custom_rewards/redemptions","patch"),charity_campaigns_get:k("/charity/campaigns","get"),charity_donations_get:k("/charity/donations","get"),chat_chatters_get:k("/chat/chatters","get"),chat_emotes_get:k("/chat/emotes","get"),chat_emotes_global_get:k("/chat/emotes/global","get"),chat_emotes_set_get:k("/chat/emotes/set","get"),chat_badges_get:k("/chat/badges","get"),chat_badges_global_get:k("/chat/badges/global","get"),chat_settings_get:k("/chat/settings","get"),chat_emotes_user_get:k("/chat/emotes/user","get"),chat_settings_patch:k("/chat/settings","patch"),chat_announcements_post:k("/chat/announcements","post"),chat_shoutouts_post:k("/chat/shoutouts","post"),chat_messages_post:k("/chat/messages","post"),chat_color_get:k("/chat/color","get"),chat_color_put:k("/chat/color","put"),clips_post:k("/clips","post"),clips_get:k("/clips","get"),eventsub_conduits_get:k("/eventsub/conduits","get"),eventsub_conduits_post:k("/eventsub/conduits","post"),eventsub_conduits_patch:k("/eventsub/conduits","patch"),eventsub_conduits_delete:k("/eventsub/conduits","delete"),eventsub_conduits_shards_get:k("/eventsub/conduits/shards","get"),eventsub_conduits_shards_patch:k("/eventsub/conduits/shards","patch"),content_classification_labels_get:k("/content_classification_labels","get"),entitlements_drops_get:k("/entitlements/drops","get"),entitlements_drops_patch:k("/entitlements/drops","patch"),extensions_configurations_get:k("/extensions/configurations","get"),extensions_configurations_put:k("/extensions/configurations","put"),extensions_required_configuration_put:k("/extensions/required_configuration","put"),extensions_pubsub_post:k("/extensions/pubsub","post"),extensions_live_get:k("/extensions/live","get"),extensions_jwt_secrets_get:k("/extensions/jwt/secrets","get"),extensions_jwt_secrets_post:k("/extensions/jwt/secrets","post"),extensions_chat_post:k("/extensions/chat","post"),extensions_get:k("/extensions","get"),extensions_released_get:k("/extensions/released","get"),bits_extensions_get:k("/bits/extensions","get"),bits_extensions_put:k("/bits/extensions","put"),eventsub_subscriptions_post:k("/eventsub/subscriptions","post"),eventsub_subscriptions_delete:k("/eventsub/subscriptions","delete"),eventsub_subscriptions_get:k("/eventsub/subscriptions","get"),games_top_get:k("/games/top","get"),games_get:k("/games","get"),goals_get:k("/goals","get"),guest_star_channel_settings_get:k("/guest_star/channel_settings","get"),guest_star_channel_settings_put:k("/guest_star/channel_settings","put"),guest_star_session_get:k("/guest_star/session","get"),guest_star_session_post:k("/guest_star/session","post"),guest_star_session_delete:k("/guest_star/session","delete"),guest_star_invites_get:k("/guest_star/invites","get"),guest_star_invites_post:k("/guest_star/invites","post"),guest_star_invites_delete:k("/guest_star/invites","delete"),guest_star_slot_post:k("/guest_star/slot","post"),guest_star_slot_patch:k("/guest_star/slot","patch"),guest_star_slot_delete:k("/guest_star/slot","delete"),guest_star_slot_settings_patch:k("/guest_star/slot_settings","patch"),hypetrain_events_get:k("/hypetrain/events","get"),moderation_enforcements_status_post:k("/moderation/enforcements/status","post"),moderation_automod_message_post:k("/moderation/automod/message","post"),moderation_automod_settings_get:k("/moderation/automod/settings","get"),moderation_automod_settings_put:k("/moderation/automod/settings","put"),moderation_banned_get:k("/moderation/banned","get"),moderation_bans_post:k("/moderation/bans","post"),moderation_bans_delete:k("/moderation/bans","delete"),moderation_unban_requests_get:k("/moderation/unban_requests","get"),moderation_unban_requests_patch:k("/moderation/unban_requests","patch"),moderation_blocked_terms_get:k("/moderation/blocked_terms","get"),moderation_blocked_terms_post:k("/moderation/blocked_terms","post"),moderation_blocked_terms_delete:k("/moderation/blocked_terms","delete"),moderation_chat_delete:k("/moderation/chat","delete"),moderation_channels_get:k("/moderation/channels","get"),moderation_moderators_get:k("/moderation/moderators","get"),moderation_moderators_post:k("/moderation/moderators","post"),moderation_moderators_delete:k("/moderation/moderators","delete"),channels_vips_get:k("/channels/vips","get"),channels_vips_post:k("/channels/vips","post"),channels_vips_delete:k("/channels/vips","delete"),moderation_shield_mode_put:k("/moderation/shield_mode","put"),moderation_shield_mode_get:k("/moderation/shield_mode","get"),polls_get:k("/polls","get"),polls_post:k("/polls","post"),polls_patch:k("/polls","patch"),predictions_get:k("/predictions","get"),predictions_post:k("/predictions","post"),predictions_patch:k("/predictions","patch"),raids_post:k("/raids","post"),raids_delete:k("/raids","delete"),schedule_get:k("/schedule","get"),schedule_icalendar_get:k("/schedule/icalendar","get"),schedule_settings_patch:k("/schedule/settings","patch"),schedule_segment_post:k("/schedule/segment","post"),schedule_segment_patch:k("/schedule/segment","patch"),schedule_segment_delete:k("/schedule/segment","delete"),search_categories_get:k("/search/categories","get"),search_channels_get:k("/search/channels","get"),streams_get:k("/streams","get"),streams_followed_get:k("/streams/followed","get"),streams_markers_post:k("/streams/markers","post"),streams_markers_get:k("/streams/markers","get"),subscriptions_get:k("/subscriptions","get"),subscriptions_user_get:k("/subscriptions/user","get"),tags_streams_get:k("/tags/streams","get"),streams_tags_get:k("/streams/tags","get"),teams_channel_get:k("/teams/channel","get"),teams_get:k("/teams","get"),users_get:k("/users","get"),users_put:k("/users","put"),users_blocks_get:k("/users/blocks","get"),users_blocks_put:k("/users/blocks","put"),users_blocks_delete:k("/users/blocks","delete"),users_extensions_list_get:k("/users/extensions/list","get"),users_extensions_get:k("/users/extensions","get"),users_extensions_put:k("/users/extensions","put"),videos_get:k("/videos","get"),videos_delete:k("/videos","delete"),whispers_post:k("/whispers","post")},A=e=>{let t={method:"websocket",session_id:e};return{stream:{online:e=>({type:"stream.online",version:"1",condition:{broadcaster_user_id:e},transport:t}),offline:e=>({type:"stream.offline",version:"1",condition:{broadcaster_user_id:e},transport:t})},channel:{update:e=>({type:"channel.update",version:"2",condition:{broadcaster_user_id:e},transport:t}),chat:{message:(e,s)=>({type:"channel.chat.message",version:"1",condition:{broadcaster_user_id:e,user_id:s},transport:t}),notification:(e,s)=>({type:"channel.chat.notification",version:"1",condition:{broadcaster_user_id:e,user_id:s},transport:t})},channel_points_automatic_reward:{add:e=>({type:"channel.channel_points_automatic_reward_redemption.add",version:"1",condition:{broadcaster_user_id:e},transport:t})},channel_points_custom_reward:{add:e=>({type:"channel.channel_points_custom_reward.add",version:"1",condition:{broadcaster_user_id:e},transport:t})},points_custom_reward_redemption:{add:(e,s)=>({type:"channel.channel_points_custom_reward_redemption.add",version:"1",condition:{broadcaster_user_id:e,rewardId:s},transport:t})},channel_points_automatic_reward_redemption:{add:e=>({type:"channel.channel_points_automatic_reward_redemption.add",version:"1",condition:{broadcaster_user_id:e},transport:t})}}}},E=(e,t)=>s=>e===s.metadata.message_type&&(null==t||s.metadata.subscription_type===t),S=E("notification","channel.chat.message"),R=E("notification","channel.chat.update"),T=E("notification","channel.channel_points_automatic_reward_redemption.add"),D=E("notification","channel.channel_points_custom_reward_redemption.add"),O=E("session_keepalive"),L=E("session_welcome"),C=E("notification","stream.offline"),j={"channel.chat.message":{is:S,regist:async(e,t)=>{await Z.createEventsub(A(e).channel.chat.message(t,t))}},"channel.update":{is:R,regist:async(e,t)=>{await Z.createEventsub(A(e).channel.update(t))}},"stream.online":{is:E("notification","stream.online"),regist:async(e,t)=>{await Z.createEventsub(A(e).stream.online(t))}},"stream.offline":{is:C,regist:async(e,t)=>{await Z.createEventsub(A(e).stream.offline(t))}},"channel.channel_points_custom_reward_redemption.add":{is:D,regist:async(e,t)=>{await Z.createEventsub(A(e).channel.points_custom_reward_redemption.add(t,t))}},"channel.channel_points_automatic_reward_redemption.add":{is:T,regist:async(e,t)=>{await Z.createEventsub(A(e).channel.channel_points_automatic_reward_redemption.add(t))}},"session.keepalive":{is:O,regist:async()=>{}},"session.welcome":{is:L,regist:async()=>{}}},N=e=>{var t;let s=null===(t=Object.entries(j).find(t=>{let[s,{is:a}]=t;return a(e)}))||void 0===t?void 0:t[0];if(null==s)throw Error("data is not defined: ".concat(JSON.stringify(e)));return s},P=async(e,t,s)=>j[e].regist(t,s),B=e=>(e<=0&&console.warn("keepalive timeout secondsは0以上の値である必要があります。"),e>=600&&console.warn("keepalive timeout secondsは600以下の値である必要があります。"),"".concat("wss://eventsub.wss.twitch.tv/ws","?keepalive_timeout_seconds=").concat(e));class H extends w.y{messageEventHandler(e){let t=JSON.parse(e.data),s=N(t);this.dispatchTypedEvent(s,new CustomEvent(s,{detail:t}))}closedEventHandler(){this.destroied||this.scoketStart()}scoketStart(){this.socket=new WebSocket(B(10)),this.socket.addEventListener("message",this.messageEventHandler),this.socket.addEventListener("close",this.closedEventHandler),this.updateSubscriptions(),this.ready=this.start()}async eventSubscription(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];this.reisteredSubsctiptions=[...this.reisteredSubsctiptions,...t],await this.updateSubscriptions()}async updateSubscriptions(){let e=this.reisteredSubsctiptions.map(e=>{if(null==this.socketId)throw Error("socket id is not found");return P(e,this.socketId,this.userId)});await Promise.all(e)}close(){null!=this.socket&&(this.destroied=!0,this.socket.close(),this.socket=null)}async start(){this.socketId=await new Promise(e=>{this.addEventListener("session.welcome",t=>{e(t.detail.payload.session.id)},{once:!0})})}constructor(e){super(),this.socket=null,this.socketId=null,this.destroied=!1,this.reisteredSubsctiptions=[],this.userId=e.userId,this.start=this.start.bind(this),this.closedEventHandler=this.closedEventHandler.bind(this),this.messageEventHandler=this.messageEventHandler.bind(this),this.scoketStart=this.scoketStart.bind(this),this.scoketStart()}}let K=async()=>{let e=await f.getMe();if(null==e){let e=(await Z.users_get({parameters:{}})).data[0],t={id:e.id,login:e.login};return await f.parameters.put({type:"me",value:t}),t}return e},q=a.Ry({type:a.Km(["chatters"]),value:a.Ry({users:a.IX(i).default([]),total:a.Rx().optional().default(0)})});a.Ry({type:a.Km(["live"]),value:a.Ry({isLive:a.O7().optional().default(!1),viewCount:a.Rx().optional().default(0),startedAt:a.hT().optional().nullable().default(null)})}),a.Ry({type:a.Km(["me"]),value:a.Ry({id:i,login:a.Z_()}).optional()});let U=async()=>{let e=await K();if(null==e)return;let[t,s]=await Promise.all([Z.chat_chatters_get({parameters:{broadcaster_id:e.id,moderator_id:e.id}}),f.getChatters()]),a=await f.spam.bulkGet(t.data.map(e=>e.user_login)).then(e=>e.map(e=>null==e?void 0:e.login)),n=t.data.sort((e,t)=>Number(e.user_id)-Number(t.user_id)).filter(e=>!a.includes(e.user_login));(n.length!==s.users.length||0!==n.filter(e=>!s.users.includes(e.user_id)).length||0!==s.users.filter(e=>!n.map(e=>e.user_id).includes(e)).length)&&f.parameters.put(q.parse({type:"chatters",value:{users:n.map(e=>e.user_id),total:n.length}}))},z=e=>null!=e,J=async()=>{let e=await K(),t=(await f.followers.toArray()).filter(t=>t.channelId===e.id),s=Z.fetchByAll(Z.channels_followers_get),a=await s({parameters:{broadcaster_id:e.id,first:100}}).then(t=>t.data.map(t=>({channelId:e.id,userId:t.user_id,followedAt:new Date(t.followed_at),updateAt:new Date,createdAt:new Date}))),n=t.map(e=>e.userId),i=a.map(e=>e.userId),o=t.filter(e=>!i.includes(e.userId)).map(e=>e.id).filter(z),r=a.filter(e=>!n.includes(e.userId));0!==o.length&&f.followers.bulkDelete(o),0!==r.length&&f.followers.bulkPut(r)};var G=s(62737),M=s.n(G);s(39055);var F=s(90748),V=s.n(F),X=s(86688),Y=s.n(X),W=s(51470),Q=s.n(W),$=s(89960),ee=s.n($);M().extend(Y()),M().extend(ee()),M().extend(Q()),M().extend(V()),M().locale("ja");let et=M(),es=e=>et(e.target).isSameOrBefore(et(e.current||new Date).subtract(e.num,e.ago)),ea=async()=>{try{let e=await fetch("https://api.twitchinsights.net/v1/bots/all",{method:"GET"});return await e.json()}catch(e){return{bots:[],_total:0}}},en="SPAM_UPDATED_AT",ei=async()=>{let e=await f.settings.get(en);if((null==e?void 0:e.value)!=null&&!es({target:e.value,num:7,ago:"day"}))return;let t=await ea();f.settings.put({id:en,value:new Date().toISOString()}),f.spam.bulkPut(t.bots.map(e=>({login:e[0]})))},eo=async()=>{let e=await K(),t=(await Z.streams_get({parameters:{user_id:[e.id]}})).data[0];if(null==t){f.parameters.put({type:"live",value:{isLive:!1,startedAt:null,viewCount:0}});return}f.parameters.put({type:"live",value:{isLive:!0,startedAt:new Date(t.started_at),viewCount:t.viewer_count}})},er=async()=>{let e=await K(),t=new H({userId:e.id});return await t.ready,await t.eventSubscription("channel.channel_points_automatic_reward_redemption.add","channel.channel_points_custom_reward_redemption.add","channel.chat.message","channel.update","stream.offline","stream.online"),t.addEventListener("channel.chat.message",t=>{let s={id:t.detail.payload.event.message_id,userId:t.detail.payload.event.chatter_user_id,channel:e.login,message:t.detail.payload.event.message.text,messageType:"chat",fragments:t.detail.payload.event.message.fragments,timestamp:Date.now(),rowdata:JSON.stringify(t),updateAt:new Date,createdAt:new Date};f.actions.add(s)}),t.addEventListener("channel.channel_points_automatic_reward_redemption.add",t=>{let s={id:t.detail.payload.event.id,userId:t.detail.payload.event.user_id,channel:e.login,userTitle:t.detail.payload.event.reward.type,userInput:t.detail.payload.event.user_input,rewardId:t.detail.payload.event.reward.type,messageType:"atutomatic-reward",timestamp:Date.now(),rowdata:JSON.stringify(t.detail),updateAt:new Date,createdAt:new Date};f.actions.add(s)}),t.addEventListener("channel.channel_points_custom_reward_redemption.add",t=>{let s={id:t.detail.payload.event.id,userId:t.detail.payload.event.user_id,channel:e.login,userTitle:t.detail.payload.event.reward.title,userInput:t.detail.payload.event.user_input,rewardId:t.detail.payload.event.reward.id,messageType:"reward",timestamp:Date.now(),rowdata:JSON.stringify(t.detail),updateAt:new Date,createdAt:new Date};f.actions.add(s)}),t.addEventListener("channel.update",t=>{let s={channelId:e.login,tpye:"update",broadcastTitle:t.detail.payload.event.title,categoryId:t.detail.payload.event.category_id,categoryName:t.detail.payload.event.category_name,language:t.detail.payload.event.language,timestamp:new Date,rowdata:JSON.stringify(t.detail),updateAt:new Date,createdAt:new Date};f.channelHistories.put(o.parse(s))}),t.addEventListener("stream.online",eo),t.addEventListener("stream.offline",eo),()=>{t.close()}},ed=null;self.addEventListener("connect",async()=>{null!=ed&&ed.then(e=>e()),ed=er()}),setInterval(()=>{ei(),U(),eo(),J()},et.duration({seconds:10}).asMilliseconds())}},r={};function d(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}},a=!0;try{o[e].call(s.exports,s,s.exports,d),a=!1}finally{a&&delete r[e]}return s.exports}d.m=o,d.x=function(){var e=d.O(void 0,[214,176],function(){return d(55940)});return d.O(e)},e=[],d.O=function(t,s,a,n){if(s){n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[s,a,n];return}for(var o=1/0,i=0;i<e.length;i++){for(var s=e[i][0],a=e[i][1],n=e[i][2],r=!0,l=0;l<s.length;l++)o>=n&&Object.keys(d.O).every(function(e){return d.O[e](s[l])})?s.splice(l--,1):(r=!1,n<o&&(o=n));if(r){e.splice(i--,1);var c=a();void 0!==c&&(t=c)}}return t},d.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return d.d(t,{a:t}),t},d.d=function(e,t){for(var s in t)d.o(t,s)&&!d.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},d.f={},d.e=function(e){return Promise.all(Object.keys(d.f).reduce(function(t,s){return d.f[s](e,t),t},[]))},d.u=function(e){return 214===e?"static/chunks/214-839a4469207812ba.js":"static/chunks/"+e+".f2557cdb57438fa6.js"},d.miniCssF=function(e){},d.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d.tt=function(){return void 0===t&&(t={createScriptURL:function(e){return e}},"undefined"!=typeof trustedTypes&&trustedTypes.createPolicy&&(t=trustedTypes.createPolicy("nextjs#bundler",t))),t},d.tu=function(e){return d.tt().createScriptURL(e)},d.p="/twitch-comment-viewer-v1-frontend/_next/",s={940:1},d.f.i=function(e,t){s[e]||importScripts(d.tu(d.p+d.u(e)))},n=(a=self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push.bind(a),a.push=function(e){var t=e[0],a=e[1],i=e[2];for(var o in a)d.o(a,o)&&(d.m[o]=a[o]);for(i&&i(d);t.length;)s[t.pop()]=1;n(e)},i=d.x,d.x=function(){return Promise.all([d.e(214),d.e(176)]).then(i)},_N_E=d.x()}();