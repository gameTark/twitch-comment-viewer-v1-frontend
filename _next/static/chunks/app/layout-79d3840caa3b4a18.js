(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{46503:function(e,t,n){Promise.resolve().then(n.bind(n,2501)),Promise.resolve().then(n.bind(n,62520)),Promise.resolve().then(n.bind(n,97383)),Promise.resolve().then(n.bind(n,45642)),Promise.resolve().then(n.bind(n,23886)),Promise.resolve().then(n.bind(n,41660)),Promise.resolve().then(n.t.bind(n,49152,23)),Promise.resolve().then(n.t.bind(n,34332,23))},62520:function(e,t,n){"use strict";n.d(t,{Drawer:function(){return o},z:function(){return c}});var l=n(57437),r=n(2265);let a="notification-drawer-001",s=(0,r.createContext)([]),i=()=>(0,r.useContext)(s),c=e=>(0,l.jsx)("label",{htmlFor:a,className:"cursor-pointer",children:e.children}),d=e=>{let t=i();return(0,l.jsxs)("div",{className:"drawer drawer-end",children:[(0,l.jsx)("input",{id:a,type:"checkbox",className:"drawer-toggle"}),(0,l.jsx)("div",{className:"drawer-content",children:e.children}),(0,l.jsxs)("div",{className:"drawer-side",children:[(0,l.jsx)("label",{htmlFor:a,"aria-label":"close sidebar",className:"drawer-overlay"}),(0,l.jsx)("ul",{className:"menu p-4 w-80 min-h-full bg-base-200 text-base-content",children:t.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]})]})},o=e=>(0,l.jsxs)(s.Provider,{value:["test"],children:[e.children,(0,l.jsx)(d,{})]})},72037:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var l=n(57437);let r=e=>(0,l.jsxs)("div",{className:"stat",children:[null==e.icon?null:(0,l.jsx)("div",{className:"stat-figure",children:e.icon}),null==e.title?null:(0,l.jsx)("div",{className:"stat-title",children:e.title}),null==e.value?null:(0,l.jsx)("div",{className:"stat-value",children:(0,l.jsx)("span",{className:"",children:e.value})}),null==e.caption?null:(0,l.jsx)("div",{className:"stat-desc",children:e.caption})]})},45642:function(e,t,n){"use strict";n.d(t,{TanstackQueryProvider:function(){return d}});var l=n(57437),r=n(8699),a=n(93191),s=n(79839),i=n(25214);let c=new r.S;function d(e){return(0,l.jsxs)(a.aH,{client:c,children:[e.children,i.is.build.production?null:(0,l.jsx)(s.t,{})]})}},23886:function(e,t,n){"use strict";n.d(t,{Footer:function(){return b}});var l=n(57437),r=n(87138),a=n(16463),s=n(44839),i=n(91279),c=n(67687),d=n(82876),o=n(2265),u=n(23332),h=n(51938);n(72037);let m=()=>{let[e,t]=(0,o.useState)({date:"0000/00/00",time:"00:00",daysOfWeek:"月"});return(0,h.Y)(()=>{let e=(0,u.B)(new Date);t({date:e.format("YYYY/MM/DD"),time:e.format("HH:mm"),daysOfWeek:e.format("ddd")})},{interval:1e3,deps:[]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,l.jsxs)("div",{className:"flex justify-between w-full",children:[(0,l.jsx)("div",{className:"countdown text-xs",children:e.time}),(0,l.jsxs)("div",{className:"countdown text-xs",children:["(",e.daysOfWeek,")"]})]}),(0,l.jsx)("div",{className:"countdown text-xs",children:e.date})]})},x=e=>{let[t,n]=(0,o.useState)("00:00:00"),r=new Intl.NumberFormat("ja",{minimumIntegerDigits:2});return(0,o.useEffect)(()=>{if(null!=e.pause||null==e.startMilliSeconds)return;let t=e.startMilliSeconds,l=window.setInterval(()=>{let l=new Date(Date.now()-t),a=e.containsTimeZone?-l.getTimezoneOffset()/60:0;n("".concat(r.format((l.getUTCHours()+a+24)%24),":").concat(r.format(l.getUTCMinutes()),":").concat(r.format(l.getUTCSeconds())))},1e3);return()=>{window.clearInterval(l)}},[e.startMilliSeconds,e.pause]),(0,l.jsx)("span",{className:" text-xs",children:(0,l.jsx)("span",{children:t})})};var f=n(62520),v=n(11581),p=n(35166);let w=()=>{let e=(0,i.yR)(()=>c.db.getMe(),[]),t=(0,i.yR)(async()=>await c.db.getMe(),[e]),n=(0,o.useMemo)(()=>{if(null==t)return[];let e=(0,d.yd)(t.login);return[{value:"ボットアカウントの見極め方",external:!0,href:"https://twitchinsights.net/bots"},{value:"チャンネルへ",external:!0,href:e.CHANNEL},{value:"チャンネルマネージャーへ",external:!0,href:e.STREAM_MANAGER}]},[t]);return(0,l.jsx)(p.n.Provider,{id:null==t?void 0:t.id,children:(0,l.jsxs)("div",{className:"dropdown dropdown-top",style:{lineHeight:0},children:[(0,l.jsx)("div",{className:"avatar",tabIndex:0,role:"button",children:(0,l.jsx)("div",{className:(0,s.Z)("w-12 h-12 rounded-full border border-primary"),children:(0,l.jsx)(p.n.ProfileImage,{})})}),(0,l.jsxs)("ul",{className:"p-2 shadow menu dropdown-content z-[1] bg-base-100 text-base-content dasy-rounded w-64 border",tabIndex:0,children:[n.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)("a",{className:"link flex justify-between items-center",target:e.external?"_blank":void 0,href:e.href,children:[e.value," ",e.external?v.U.EXTERNAL:null]})},e.value)),(0,l.jsx)("li",{onClick:()=>{(0,d.HB)(),location.reload()},children:(0,l.jsx)("a",{children:"ログアウト"})})]})]})})},j=[{icon:v.U.BROADCAST,text:"ライブ",path:"/"},{icon:v.U.GAME,text:"ゲーム",path:"/games"},{icon:v.U.DATABASE,text:"集計データ",path:"/database"},{icon:v.U.GEAR,text:"設定",path:"/setting"}],b=()=>{var e;let t=(0,i.yR)(()=>(0,d.iP)(),[]),n=(0,i.yR)(()=>c.db.getLive(),[]);return(0,l.jsx)("footer",{className:(0,s.Z)("footer items-center bg-primary flex text-primary-content sticky bottom-0 h-fit mt-auto py-3 px-4 select-none",{"opacity-0":!t}),children:(0,l.jsxs)("div",{className:"flex gap-4 items-center grow",children:[(0,l.jsx)(w,{}),(0,l.jsx)(g,{}),(0,l.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("p",{className:"text-xs",children:"配信時間"}),(0,l.jsx)(x,{startMilliSeconds:null==n?void 0:null===(e=n.startedAt)||void 0===e?void 0:e.getTime()})]}),(0,l.jsx)("div",{children:(0,l.jsx)(m,{})}),(0,l.jsx)("div",{children:(0,l.jsx)(f.z,{children:v.U.NOTIFICATION})})]})]})})},N=e=>{let t=e.active||!1,n=(0,s.Z)({"opacity-50":!t,"opacity-100":t},"transition-opacity transition-transform");return(0,l.jsxs)(r.default,{className:(0,s.Z)("flex flex-col items-center cursor-pointer h-full justify-between w-16 whitespace-nowrap",n),href:e.path,as:e.path,children:[(0,l.jsx)("span",{children:e.icon}),(0,l.jsx)("p",{className:"text-xs font-black ",children:e.text})]})},g=()=>{let e=(0,a.usePathname)();return(0,l.jsx)("nav",{className:"flex gap-4 grow items-end",children:j.map(t=>(0,l.jsx)(N,{...t,active:t.path===e},t.path))})}},35166:function(e,t,n){"use strict";n.d(t,{n:function(){return E}});var l=n(57437),r=n(2265),a=n(91279),s=n(53731),i=n(67687),c=n(82876),d=n(59151),o=n(87722);class u extends o.K{async batchLoad(e){return await (0,d.Rf)(e)}}var h=n(62022),m=n(11581),x=n(12853);let f=(0,r.createContext)(null),v=()=>(0,r.useContext)(f),p=new u,w=(0,x.kQ)(v,["displayName","login"],{children:"........."}),j=(0,x.kQ)(v,["id"],{children:"........."}),b=(0,x.kQ)(v,["description"],{children:"........."}),N=(0,x.kQ)(v,["metaComment"],{children:"........."}),g=(0,x.RY)(v,["createdAt"],{children:"...."}),y=(0,x.RY)(v,["updateAt"],{children:"...."}),k=(0,x.uB)(v,{src:["profileImageUrl"],alt:["login"]},s.Y_.PROFILE_404,{className:"inline-block aspect-square select-none"}),C=(0,x.uB)(v,{src:["offlineImageUrl"],alt:["login"]},s.Y_.NONE,{className:"inline-block aspect-square select-none"}),A=e=>(0,r.useCallback)(async t=>{if(null!=e)return await i.db.users.update(e,t)},[e]),E={Provider:e=>{let t=(0,a.yR)(async()=>{if(null!=e.id)return await p.load(e.id)},[e.id]);return(0,l.jsx)(f.Provider,{value:t,children:e.children})},Id:j,useUser:v,useUpdateUser:()=>{let e=v();return A(null==e?void 0:e.id)},Name:w,ProfileImage:k,Description:b,UpdateAt:y,CreatedAt:g,MetaComment:N,EditableMetaComment:e=>{let t=v(),n=(0,r.useRef)(null),[a,s]=(0,r.useState)(""),i=A(null==t?void 0:t.id);(0,r.useEffect)(()=>{null!=t&&null!=n.current&&(s(t.metaComment||""),n.current.value=t.metaComment||"")},[null==t?void 0:t.id]);let c=(0,r.useCallback)(t=>{s(t.currentTarget.value),i({metaComment:t.currentTarget.value}),e.onChange&&e.onChange(t)},[]);return(0,l.jsx)("textarea",{className:"textarea textarea-bordered leading-4",placeholder:"Bio",rows:6,...e,onChange:c,defaultValue:a,ref:n})},OfflineImage:C,FollowerCount:()=>{let e=v(),t=(0,h.Gq)(async()=>{if((null==e?void 0:e.id)!=null)return(await c.$O.channels_followers_get({parameters:{broadcaster_id:e.id}})).total||0},[null==e?void 0:e.id]);return(0,l.jsx)("span",{children:null!=t?t:"..."})},TwitchLink:e=>{let t=v();if(null!=t)return(0,l.jsxs)("a",{className:"link link-info flex gap-1 py-2 items-center",...e,target:"__blank",href:"https://www.twitch.tv/".concat(t.login),children:["Twitch ",m.U.EXTERNAL]})}}},41660:function(e,t,n){"use strict";n.d(t,{TwitchRouter:function(){return o}});var l=n(57437),r=n(2265),a=n(67687),s=n(25214),i=n(82876),c=n(62022);let d=()=>new SharedWorker(n.tu(new URL(n.p+n.u(729),n.b))),o=e=>{let t=(0,c.f0)(),n=(0,r.useCallback)(async()=>{if(!await (0,i.iP)())return t(),()=>{};let e=await i.$O.users_get({parameters:{}});if(null==e)return t(),()=>{};let n=e.data[0],l={id:n.id,login:n.login};await a.db.parameters.put({type:"me",value:l});let r=d();return r.port.start(),()=>{r.port.close()}},[]);return(0,r.useEffect)(()=>{if((0,i.AC)())(0,i.MH)({onSuccess:()=>{location.href=s.is.build.production?"/twitch-comment-viewer-v1-frontend":"/"}});else{let e=n();return()=>{e.then(e=>{e()})}}},[]),(0,c.Gq)(async()=>await (0,i.iP)(),[]),(0,i.AC)(),(0,l.jsx)(l.Fragment,{children:e.children})}},34332:function(){}},function(e){e.O(0,[910,228,214,803,701,279,945,802,336,63,30,285,501,971,23,744],function(){return e(e.s=46503)}),_N_E=e.O()}]);